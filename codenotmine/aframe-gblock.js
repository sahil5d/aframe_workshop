!function () { "use strict"; var r = function (r, e) { for (var t = -1, n = e.length, o = r.length; ++t < n;)r[o + t] = e[t]; return r }, e = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {}; function t(r, e) { return r(e = { exports: {} }, e.exports), e.exports } var n = "object" == typeof e && e && e.Object === Object && e, o = "object" == typeof self && self && self.Object === Object && self, a = n || o || Function("return this")(), i = a.Symbol, u = Object.prototype, c = u.hasOwnProperty, s = u.toString, f = i ? i.toStringTag : void 0; var l = function (r) { var e = c.call(r, f), t = r[f]; try { r[f] = void 0; var n = !0 } catch (r) { } var o = s.call(r); return n && (e ? r[f] = t : delete r[f]), o }, v = Object.prototype.toString; var d = function (r) { return v.call(r) }, p = "[object Null]", h = "[object Undefined]", b = i ? i.toStringTag : void 0; var _ = function (r) { return null == r ? void 0 === r ? h : p : b && b in Object(r) ? l(r) : d(r) }; var y = function (r) { return null != r && "object" == typeof r }, m = "[object Arguments]"; var g = function (r) { return y(r) && _(r) == m }, j = Object.prototype, w = j.hasOwnProperty, O = j.propertyIsEnumerable, E = g(function () { return arguments }()) ? g : function (r) { return y(r) && w.call(r, "callee") && !O.call(r, "callee") }, P = Array.isArray, x = i ? i.isConcatSpreadable : void 0; var T = function (r) { return P(r) || E(r) || !!(x && r && r[x]) }; var R = function e(t, n, o, a, i) { var u = -1, c = t.length; for (o || (o = T), i || (i = []); ++u < c;) { var s = t[u]; n > 0 && o(s) ? n > 1 ? e(s, n - 1, o, a, i) : r(i, s) : a || (i[i.length] = s) } return i }; var z = function (r, e) { for (var t = -1, n = null == r ? 0 : r.length, o = Array(n); ++t < n;)o[t] = e(r[t], t, r); return o }; var A = function () { this.__data__ = [], this.size = 0 }; var k = function (r, e) { return r === e || r != r && e != e }; var F = function (r, e) { for (var t = r.length; t--;)if (k(r[t][0], e)) return t; return -1 }, S = Array.prototype.splice; var L = function (r) { var e = this.__data__, t = F(e, r); return !(t < 0 || (t == e.length - 1 ? e.pop() : S.call(e, t, 1), --this.size, 0)) }; var W = function (r) { var e = this.__data__, t = F(e, r); return t < 0 ? void 0 : e[t][1] }; var M = function (r) { return F(this.__data__, r) > -1 }; var C = function (r, e) { var t = this.__data__, n = F(t, r); return n < 0 ? (++this.size, t.push([r, e])) : t[n][1] = e, this }; function Z(r) { var e = -1, t = null == r ? 0 : r.length; for (this.clear(); ++e < t;) { var n = r[e]; this.set(n[0], n[1]) } } Z.prototype.clear = A, Z.prototype.delete = L, Z.prototype.get = W, Z.prototype.has = M, Z.prototype.set = C; var D = Z; var G = function () { this.__data__ = new D, this.size = 0 }; var H = function (r) { var e = this.__data__, t = e.delete(r); return this.size = e.size, t }; var I = function (r) { return this.__data__.get(r) }; var V = function (r) { return this.__data__.has(r) }; var B = function (r) { var e = typeof r; return null != r && ("object" == e || "function" == e) }, N = "[object AsyncFunction]", Q = "[object Function]", J = "[object GeneratorFunction]", U = "[object Proxy]"; var $, Y = function (r) { if (!B(r)) return !1; var e = _(r); return e == Q || e == J || e == N || e == U }, X = a["__core-js_shared__"], K = ($ = /[^.]+$/.exec(X && X.keys && X.keys.IE_PROTO || "")) ? "Symbol(src)_1." + $ : ""; var q = function (r) { return !!K && K in r }, rr = Function.prototype.toString; var er = function (r) { if (null != r) { try { return rr.call(r) } catch (r) { } try { return r + "" } catch (r) { } } return "" }, tr = /^\[object .+?Constructor\]$/, nr = Function.prototype, or = Object.prototype, ar = nr.toString, ir = or.hasOwnProperty, ur = RegExp("^" + ar.call(ir).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"); var cr = function (r) { return !(!B(r) || q(r)) && (Y(r) ? ur : tr).test(er(r)) }; var sr = function (r, e) { return null == r ? void 0 : r[e] }; var fr = function (r, e) { var t = sr(r, e); return cr(t) ? t : void 0 }, lr = fr(a, "Map"), vr = fr(Object, "create"); var dr = function () { this.__data__ = vr ? vr(null) : {}, this.size = 0 }; var pr = function (r) { var e = this.has(r) && delete this.__data__[r]; return this.size -= e ? 1 : 0, e }, hr = "__lodash_hash_undefined__", br = Object.prototype.hasOwnProperty; var _r = function (r) { var e = this.__data__; if (vr) { var t = e[r]; return t === hr ? void 0 : t } return br.call(e, r) ? e[r] : void 0 }, yr = Object.prototype.hasOwnProperty; var mr = function (r) { var e = this.__data__; return vr ? void 0 !== e[r] : yr.call(e, r) }, gr = "__lodash_hash_undefined__"; var jr = function (r, e) { var t = this.__data__; return this.size += this.has(r) ? 0 : 1, t[r] = vr && void 0 === e ? gr : e, this }; function wr(r) { var e = -1, t = null == r ? 0 : r.length; for (this.clear(); ++e < t;) { var n = r[e]; this.set(n[0], n[1]) } } wr.prototype.clear = dr, wr.prototype.delete = pr, wr.prototype.get = _r, wr.prototype.has = mr, wr.prototype.set = jr; var Or = wr; var Er = function () { this.size = 0, this.__data__ = { hash: new Or, map: new (lr || D), string: new Or } }; var Pr = function (r) { var e = typeof r; return "string" == e || "number" == e || "symbol" == e || "boolean" == e ? "__proto__" !== r : null === r }; var xr = function (r, e) { var t = r.__data__; return Pr(e) ? t["string" == typeof e ? "string" : "hash"] : t.map }; var Tr = function (r) { var e = xr(this, r).delete(r); return this.size -= e ? 1 : 0, e }; var Rr = function (r) { return xr(this, r).get(r) }; var zr = function (r) { return xr(this, r).has(r) }; var Ar = function (r, e) { var t = xr(this, r), n = t.size; return t.set(r, e), this.size += t.size == n ? 0 : 1, this }; function kr(r) { var e = -1, t = null == r ? 0 : r.length; for (this.clear(); ++e < t;) { var n = r[e]; this.set(n[0], n[1]) } } kr.prototype.clear = Er, kr.prototype.delete = Tr, kr.prototype.get = Rr, kr.prototype.has = zr, kr.prototype.set = Ar; var Fr = kr, Sr = 200; var Lr = function (r, e) { var t = this.__data__; if (t instanceof D) { var n = t.__data__; if (!lr || n.length < Sr - 1) return n.push([r, e]), this.size = ++t.size, this; t = this.__data__ = new Fr(n) } return t.set(r, e), this.size = t.size, this }; function Wr(r) { var e = this.__data__ = new D(r); this.size = e.size } Wr.prototype.clear = G, Wr.prototype.delete = H, Wr.prototype.get = I, Wr.prototype.has = V, Wr.prototype.set = Lr; var Mr = Wr, Cr = "__lodash_hash_undefined__"; var Zr = function (r) { return this.__data__.set(r, Cr), this }; var Dr = function (r) { return this.__data__.has(r) }; function Gr(r) { var e = -1, t = null == r ? 0 : r.length; for (this.__data__ = new Fr; ++e < t;)this.add(r[e]) } Gr.prototype.add = Gr.prototype.push = Zr, Gr.prototype.has = Dr; var Hr = Gr; var Ir = function (r, e) { for (var t = -1, n = null == r ? 0 : r.length; ++t < n;)if (e(r[t], t, r)) return !0; return !1 }; var Vr = function (r, e) { return r.has(e) }, Br = 1, Nr = 2; var Qr = function (r, e, t, n, o, a) { var i = t & Br, u = r.length, c = e.length; if (u != c && !(i && c > u)) return !1; var s = a.get(r); if (s && a.get(e)) return s == e; var f = -1, l = !0, v = t & Nr ? new Hr : void 0; for (a.set(r, e), a.set(e, r); ++f < u;) { var d = r[f], p = e[f]; if (n) var h = i ? n(p, d, f, e, r, a) : n(d, p, f, r, e, a); if (void 0 !== h) { if (h) continue; l = !1; break } if (v) { if (!Ir(e, function (r, e) { if (!Vr(v, e) && (d === r || o(d, r, t, n, a))) return v.push(e) })) { l = !1; break } } else if (d !== p && !o(d, p, t, n, a)) { l = !1; break } } return a.delete(r), a.delete(e), l }, Jr = a.Uint8Array; var Ur = function (r) { var e = -1, t = Array(r.size); return r.forEach(function (r, n) { t[++e] = [n, r] }), t }; var $r = function (r) { var e = -1, t = Array(r.size); return r.forEach(function (r) { t[++e] = r }), t }, Yr = 1, Xr = 2, Kr = "[object Boolean]", qr = "[object Date]", re = "[object Error]", ee = "[object Map]", te = "[object Number]", ne = "[object RegExp]", oe = "[object Set]", ae = "[object String]", ie = "[object Symbol]", ue = "[object ArrayBuffer]", ce = "[object DataView]", se = i ? i.prototype : void 0, fe = se ? se.valueOf : void 0; var le = function (r, e, t, n, o, a, i) { switch (t) { case ce: if (r.byteLength != e.byteLength || r.byteOffset != e.byteOffset) return !1; r = r.buffer, e = e.buffer; case ue: return !(r.byteLength != e.byteLength || !a(new Jr(r), new Jr(e))); case Kr: case qr: case te: return k(+r, +e); case re: return r.name == e.name && r.message == e.message; case ne: case ae: return r == e + ""; case ee: var u = Ur; case oe: var c = n & Yr; if (u || (u = $r), r.size != e.size && !c) return !1; var s = i.get(r); if (s) return s == e; n |= Xr, i.set(r, e); var f = Qr(u(r), u(e), n, o, a, i); return i.delete(r), f; case ie: if (fe) return fe.call(r) == fe.call(e) }return !1 }; var ve = function (e, t, n) { var o = t(e); return P(e) ? o : r(o, n(e)) }; var de = function (r, e) { for (var t = -1, n = null == r ? 0 : r.length, o = 0, a = []; ++t < n;) { var i = r[t]; e(i, t, r) && (a[o++] = i) } return a }; var pe = function () { return [] }, he = Object.prototype.propertyIsEnumerable, be = Object.getOwnPropertySymbols, _e = be ? function (r) { return null == r ? [] : (r = Object(r), de(be(r), function (e) { return he.call(r, e) })) } : pe; var ye = function (r, e) { for (var t = -1, n = Array(r); ++t < r;)n[t] = e(t); return n }; var me = function () { return !1 }, ge = t(function (r, e) { var t = e && !e.nodeType && e, n = t && r && !r.nodeType && r, o = n && n.exports === t ? a.Buffer : void 0, i = (o ? o.isBuffer : void 0) || me; r.exports = i }), je = 9007199254740991, we = /^(?:0|[1-9]\d*)$/; var Oe = function (r, e) { return !!(e = null == e ? je : e) && ("number" == typeof r || we.test(r)) && r > -1 && r % 1 == 0 && r < e }, Ee = 9007199254740991; var Pe = function (r) { return "number" == typeof r && r > -1 && r % 1 == 0 && r <= Ee }, xe = {}; xe["[object Float32Array]"] = xe["[object Float64Array]"] = xe["[object Int8Array]"] = xe["[object Int16Array]"] = xe["[object Int32Array]"] = xe["[object Uint8Array]"] = xe["[object Uint8ClampedArray]"] = xe["[object Uint16Array]"] = xe["[object Uint32Array]"] = !0, xe["[object Arguments]"] = xe["[object Array]"] = xe["[object ArrayBuffer]"] = xe["[object Boolean]"] = xe["[object DataView]"] = xe["[object Date]"] = xe["[object Error]"] = xe["[object Function]"] = xe["[object Map]"] = xe["[object Number]"] = xe["[object Object]"] = xe["[object RegExp]"] = xe["[object Set]"] = xe["[object String]"] = xe["[object WeakMap]"] = !1; var Te = function (r) { return y(r) && Pe(r.length) && !!xe[_(r)] }; var Re = function (r) { return function (e) { return r(e) } }, ze = t(function (r, e) { var t = e && !e.nodeType && e, o = t && r && !r.nodeType && r, a = o && o.exports === t && n.process, i = function () { try { return a && a.binding && a.binding("util") } catch (r) { } }(); r.exports = i }), Ae = ze && ze.isTypedArray, ke = Ae ? Re(Ae) : Te, Fe = Object.prototype.hasOwnProperty; var Se = function (r, e) { var t = P(r), n = !t && E(r), o = !t && !n && ge(r), a = !t && !n && !o && ke(r), i = t || n || o || a, u = i ? ye(r.length, String) : [], c = u.length; for (var s in r) !e && !Fe.call(r, s) || i && ("length" == s || o && ("offset" == s || "parent" == s) || a && ("buffer" == s || "byteLength" == s || "byteOffset" == s) || Oe(s, c)) || u.push(s); return u }, Le = Object.prototype; var We = function (r) { var e = r && r.constructor; return r === ("function" == typeof e && e.prototype || Le) }; var Me = function (r, e) { return function (t) { return r(e(t)) } }(Object.keys, Object), Ce = Object.prototype.hasOwnProperty; var Ze = function (r) { if (!We(r)) return Me(r); var e = []; for (var t in Object(r)) Ce.call(r, t) && "constructor" != t && e.push(t); return e }; var De = function (r) { return null != r && Pe(r.length) && !Y(r) }; var Ge = function (r) { return De(r) ? Se(r) : Ze(r) }; var He = function (r) { return ve(r, Ge, _e) }, Ie = 1, Ve = Object.prototype.hasOwnProperty; var Be = function (r, e, t, n, o, a) { var i = t & Ie, u = He(r), c = u.length; if (c != He(e).length && !i) return !1; for (var s = c; s--;) { var f = u[s]; if (!(i ? f in e : Ve.call(e, f))) return !1 } var l = a.get(r); if (l && a.get(e)) return l == e; var v = !0; a.set(r, e), a.set(e, r); for (var d = i; ++s < c;) { var p = r[f = u[s]], h = e[f]; if (n) var b = i ? n(h, p, f, e, r, a) : n(p, h, f, r, e, a); if (!(void 0 === b ? p === h || o(p, h, t, n, a) : b)) { v = !1; break } d || (d = "constructor" == f) } if (v && !d) { var _ = r.constructor, y = e.constructor; _ != y && "constructor" in r && "constructor" in e && !("function" == typeof _ && _ instanceof _ && "function" == typeof y && y instanceof y) && (v = !1) } return a.delete(r), a.delete(e), v }, Ne = fr(a, "DataView"), Qe = fr(a, "Promise"), Je = fr(a, "Set"), Ue = fr(a, "WeakMap"), $e = er(Ne), Ye = er(lr), Xe = er(Qe), Ke = er(Je), qe = er(Ue), rt = _; (Ne && "[object DataView]" != rt(new Ne(new ArrayBuffer(1))) || lr && "[object Map]" != rt(new lr) || Qe && "[object Promise]" != rt(Qe.resolve()) || Je && "[object Set]" != rt(new Je) || Ue && "[object WeakMap]" != rt(new Ue)) && (rt = function (r) { var e = _(r), t = "[object Object]" == e ? r.constructor : void 0, n = t ? er(t) : ""; if (n) switch (n) { case $e: return "[object DataView]"; case Ye: return "[object Map]"; case Xe: return "[object Promise]"; case Ke: return "[object Set]"; case qe: return "[object WeakMap]" }return e }); var et = rt, tt = 1, nt = "[object Arguments]", ot = "[object Array]", at = "[object Object]", it = Object.prototype.hasOwnProperty; var ut = function (r, e, t, n, o, a) { var i = P(r), u = P(e), c = i ? ot : et(r), s = u ? ot : et(e), f = (c = c == nt ? at : c) == at, l = (s = s == nt ? at : s) == at, v = c == s; if (v && ge(r)) { if (!ge(e)) return !1; i = !0, f = !1 } if (v && !f) return a || (a = new Mr), i || ke(r) ? Qr(r, e, t, n, o, a) : le(r, e, c, t, n, o, a); if (!(t & tt)) { var d = f && it.call(r, "__wrapped__"), p = l && it.call(e, "__wrapped__"); if (d || p) { var h = d ? r.value() : r, b = p ? e.value() : e; return a || (a = new Mr), o(h, b, t, n, a) } } return !!v && (a || (a = new Mr), Be(r, e, t, n, o, a)) }; var ct = function r(e, t, n, o, a) { return e === t || (null == e || null == t || !y(e) && !y(t) ? e != e && t != t : ut(e, t, n, o, r, a)) }, st = 1, ft = 2; var lt = function (r, e, t, n) { var o = t.length, a = o, i = !n; if (null == r) return !a; for (r = Object(r); o--;) { var u = t[o]; if (i && u[2] ? u[1] !== r[u[0]] : !(u[0] in r)) return !1 } for (; ++o < a;) { var c = (u = t[o])[0], s = r[c], f = u[1]; if (i && u[2]) { if (void 0 === s && !(c in r)) return !1 } else { var l = new Mr; if (n) var v = n(s, f, c, r, e, l); if (!(void 0 === v ? ct(f, s, st | ft, n, l) : v)) return !1 } } return !0 }; var vt = function (r) { return r == r && !B(r) }; var dt = function (r) { for (var e = Ge(r), t = e.length; t--;) { var n = e[t], o = r[n]; e[t] = [n, o, vt(o)] } return e }; var pt = function (r, e) { return function (t) { return null != t && t[r] === e && (void 0 !== e || r in Object(t)) } }; var ht = function (r) { var e = dt(r); return 1 == e.length && e[0][2] ? pt(e[0][0], e[0][1]) : function (t) { return t === r || lt(t, r, e) } }, bt = "[object Symbol]"; var _t = function (r) { return "symbol" == typeof r || y(r) && _(r) == bt }, yt = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, mt = /^\w*$/; var gt = function (r, e) { if (P(r)) return !1; var t = typeof r; return !("number" != t && "symbol" != t && "boolean" != t && null != r && !_t(r)) || mt.test(r) || !yt.test(r) || null != e && r in Object(e) }, jt = "Expected a function"; function wt(r, e) { if ("function" != typeof r || null != e && "function" != typeof e) throw new TypeError(jt); var t = function () { var n = arguments, o = e ? e.apply(this, n) : n[0], a = t.cache; if (a.has(o)) return a.get(o); var i = r.apply(this, n); return t.cache = a.set(o, i) || a, i }; return t.cache = new (wt.Cache || Fr), t } wt.Cache = Fr; var Ot = wt, Et = 500; var Pt = /^\./, xt = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, Tt = /\\(\\)?/g, Rt = function (r) { var e = Ot(r, function (r) { return t.size === Et && t.clear(), r }), t = e.cache; return e }(function (r) { var e = []; return Pt.test(r) && e.push(""), r.replace(xt, function (r, t, n, o) { e.push(n ? o.replace(Tt, "$1") : t || r) }), e }), zt = 1 / 0, At = i ? i.prototype : void 0, kt = At ? At.toString : void 0; var Ft = function r(e) { if ("string" == typeof e) return e; if (P(e)) return z(e, r) + ""; if (_t(e)) return kt ? kt.call(e) : ""; var t = e + ""; return "0" == t && 1 / e == -zt ? "-0" : t }; var St = function (r) { return null == r ? "" : Ft(r) }; var Lt = function (r, e) { return P(r) ? r : gt(r, e) ? [r] : Rt(St(r)) }, Wt = 1 / 0; var Mt = function (r) { if ("string" == typeof r || _t(r)) return r; var e = r + ""; return "0" == e && 1 / r == -Wt ? "-0" : e }; var Ct = function (r, e) { for (var t = 0, n = (e = Lt(e, r)).length; null != r && t < n;)r = r[Mt(e[t++])]; return t && t == n ? r : void 0 }; var Zt = function (r, e, t) { var n = null == r ? void 0 : Ct(r, e); return void 0 === n ? t : n }; var Dt = function (r, e) { return null != r && e in Object(r) }; var Gt = function (r, e, t) { for (var n = -1, o = (e = Lt(e, r)).length, a = !1; ++n < o;) { var i = Mt(e[n]); if (!(a = null != r && t(r, i))) break; r = r[i] } return a || ++n != o ? a : !!(o = null == r ? 0 : r.length) && Pe(o) && Oe(i, o) && (P(r) || E(r)) }; var Ht = function (r, e) { return null != r && Gt(r, e, Dt) }, It = 1, Vt = 2; var Bt = function (r, e) { return gt(r) && vt(e) ? pt(Mt(r), e) : function (t) { var n = Zt(t, r); return void 0 === n && n === e ? Ht(t, r) : ct(e, n, It | Vt) } }; var Nt = function (r) { return r }; var Qt = function (r) { return function (e) { return null == e ? void 0 : e[r] } }; var Jt = function (r) { return function (e) { return Ct(e, r) } }; var Ut = function (r) { return gt(r) ? Qt(Mt(r)) : Jt(r) }; var $t = function (r) { return "function" == typeof r ? r : null == r ? Nt : "object" == typeof r ? P(r) ? Bt(r[0], r[1]) : ht(r) : Ut(r) }; var Yt = function (r) { return function (e, t, n) { for (var o = -1, a = Object(e), i = n(e), u = i.length; u--;) { var c = i[r ? u : ++o]; if (!1 === t(a[c], c, a)) break } return e } }(); var Xt = function (r, e) { return function (t, n) { if (null == t) return t; if (!De(t)) return r(t, n); for (var o = t.length, a = e ? o : -1, i = Object(t); (e ? a-- : ++a < o) && !1 !== n(i[a], a, i);); return t } }(function (r, e) { return r && Yt(r, e, Ge) }); var Kt = function (r, e) { var t = -1, n = De(r) ? Array(r.length) : []; return Xt(r, function (r, o, a) { n[++t] = e(r, o, a) }), n }; var qt = function (r, e) { var t = r.length; for (r.sort(e); t--;)r[t] = r[t].value; return r }; var rn = function (r, e) { if (r !== e) { var t = void 0 !== r, n = null === r, o = r == r, a = _t(r), i = void 0 !== e, u = null === e, c = e == e, s = _t(e); if (!u && !s && !a && r > e || a && i && c && !u && !s || n && i && c || !t && c || !o) return 1; if (!n && !a && !s && r < e || s && t && o && !n && !a || u && t && o || !i && o || !c) return -1 } return 0 }; var en = function (r, e, t) { for (var n = -1, o = r.criteria, a = e.criteria, i = o.length, u = t.length; ++n < i;) { var c = rn(o[n], a[n]); if (c) return n >= u ? c : c * ("desc" == t[n] ? -1 : 1) } return r.index - e.index }; var tn = function (r, e, t) { var n = -1; e = z(e.length ? e : [Nt], Re($t)); var o = Kt(r, function (r, t, o) { return { criteria: z(e, function (e) { return e(r) }), index: ++n, value: r } }); return qt(o, function (r, e) { return en(r, e, t) }) }; var nn = function (r, e, t) { switch (t.length) { case 0: return r.call(e); case 1: return r.call(e, t[0]); case 2: return r.call(e, t[0], t[1]); case 3: return r.call(e, t[0], t[1], t[2]) }return r.apply(e, t) }, on = Math.max; var an = function (r, e, t) { return e = on(void 0 === e ? r.length - 1 : e, 0), function () { for (var n = arguments, o = -1, a = on(n.length - e, 0), i = Array(a); ++o < a;)i[o] = n[e + o]; o = -1; for (var u = Array(e + 1); ++o < e;)u[o] = n[o]; return u[e] = t(i), nn(r, this, u) } }; var un = function (r) { return function () { return r } }, cn = function () { try { var r = fr(Object, "defineProperty"); return r({}, "", {}), r } catch (r) { } }(), sn = cn ? function (r, e) { return cn(r, "toString", { configurable: !0, enumerable: !1, value: un(e), writable: !0 }) } : Nt, fn = 800, ln = 16, vn = Date.now; var dn = function (r) { var e = 0, t = 0; return function () { var n = vn(), o = ln - (n - t); if (t = n, o > 0) { if (++e >= fn) return arguments[0] } else e = 0; return r.apply(void 0, arguments) } }(sn); var pn = function (r, e, t) { if (!B(t)) return !1; var n = typeof e; return !!("number" == n ? De(t) && Oe(e, t.length) : "string" == n && e in t) && k(t[e], r) }, hn = function (r, e) { return dn(an(r, e, Nt), r + "") }(function (r, e) { if (null == r) return []; var t = e.length; return t > 1 && pn(r, e[0], e[1]) ? e = [] : t > 2 && pn(e[0], e[1], e[2]) && (e = [e[0]]), tn(r, R(e, 1), []) }); function bn(r) { r = r || {}; this.maxResolvedCache = r.maxResolvedCache || 1e3, this._pendingPromises = {}, this._resolvedPromises = {} } bn.prototype = { add: function (r, e) { var t = this; if (this._pendingPromises[r]) return this._pendingPromises[r]; if (this._resolvedPromises[r]) return this._resolvedPromises[r]; var n = { key: r, timestamp: Date.now(), promise: e }; return this._pendingPromises[r] = n, e.then(function (e) { var n = t._pendingPromises[r]; delete t._pendingPromises[r], n.data = e, t._resolvedPromises[r] = n }, function () { delete t._pendingPromises[r] }), this._collectGarbage(), n }, get: function (r) { var e = this._pendingPromises[r] || this._resolvedPromises[r]; return !!e && (e.timestamp = Date.now(), e.promise) }, purge: function () { for (var r in this._resolvedPromises) delete this._resolvedPromises[r] }, _collectGarbage: function () { var r = hn(this._resolvedPromises, function (r) { return r.timestamp }), e = r.length - this.maxResolvedCache; if (!(e <= 0)) for (var t = 0; t < e; t++)delete this._resolvedPromises[r[t].key] } }; var _n = new bn; var yn, mn = { text: "uniform vec3 u_color;\r\nuniform float u_metallic;\r\nuniform float u_roughness;\r\nuniform vec3 u_light0Pos;\r\nuniform vec3 u_light0Color;\r\nuniform vec3 u_light1Pos;\r\nuniform vec3 u_light1Color;\r\nuniform mat4 u_modelMatrix;\r\nuniform sampler2D u_reflectionCube;\r\nuniform sampler2D u_reflectionCubeBlur;", base64: "data:text/plain;base64,dW5pZm9ybSB2ZWMzIHVfY29sb3I7DQp1bmlmb3JtIGZsb2F0IHVfbWV0YWxsaWM7DQp1bmlmb3JtIGZsb2F0IHVfcm91Z2huZXNzOw0KdW5pZm9ybSB2ZWMzIHVfbGlnaHQwUG9zOw0KdW5pZm9ybSB2ZWMzIHVfbGlnaHQwQ29sb3I7DQp1bmlmb3JtIHZlYzMgdV9saWdodDFQb3M7DQp1bmlmb3JtIHZlYzMgdV9saWdodDFDb2xvcjsNCnVuaWZvcm0gbWF0NCB1X21vZGVsTWF0cml4Ow0KdW5pZm9ybSBzYW1wbGVyMkQgdV9yZWZsZWN0aW9uQ3ViZTsNCnVuaWZvcm0gc2FtcGxlcjJEIHVfcmVmbGVjdGlvbkN1YmVCbHVyOw==" }, gn = { text: "varying vec3 v_normal;\r\nvarying vec3 v_position;\r\nvarying vec3 v_binormal;\r\nvarying vec3 v_tangent;\r\n", base64: "data:text/plain;base64,dmFyeWluZyB2ZWMzIHZfbm9ybWFsOw0KdmFyeWluZyB2ZWMzIHZfcG9zaXRpb247DQp2YXJ5aW5nIHZlYzMgdl9iaW5vcm1hbDsNCnZhcnlpbmcgdmVjMyB2X3RhbmdlbnQ7DQo=" }, jn = "https://cdn.rawgit.com/mrdoob/three.js/r86/examples/js/loaders/GLTFLoader.js", wn = "https://poly.googleapis.com/v1/assets/", On = "https://gblock.3d.io/api/get-gltf-url/", En = new bn; function Pn(r, e) { return new Promise(function (t, n) { function o() { this.manager = THREE.DefaultLoadingManager, this.path = THREE.Loader.prototype.extractUrlBase(r) } var a = new THREE.FileLoader(o.manager); a.setResponseType("arraybuffer"), a.load(r, function (r) { try { var e = JSON.parse(function (r) { if (void 0 !== window.TextDecoder) return (new TextDecoder).decode(r); for (var e = "", t = 0, n = r.length; t < n; t++)e += String.fromCharCode(r[t]); return e }(r)); if (void 0 === e.asset || e.asset.version[0] < 2) (function () { yn || (THREE.___GLTF2Loader = THREE.GLTFLoader, yn = function (r) { if (window.___modules = window.___modules || {}, window.___modules[r]) return Promise.resolve(window.___modules[r]); var e = _n.get(r); if (e) return e; var t = fetch(r).then(function (e) { if (!e.ok) throw "Could not load script from URL: " + r; return e.text() }).then(function (e) { var t; t = e.indexOf("define(function()") > -1 ? e + '\nfunction define(cb){ window.___modules["' + r + '"] = cb(); };' : 'window.___modules["' + r + '"] = (function(){ var exports = {}, module = {exports:exports};' + e + "\nreturn module.exports\n})()"; var n = document.createElement("script"); try { n.appendChild(document.createTextNode(t)), document.body.appendChild(n) } catch (r) { n.text = t, document.body.appendChild(n) } return window.___modules[r] }); return _n.add(r, t), t }(jn).then(function () { var r = THREE.GLTFLoader; return THREE.GLTFLoader = THREE.___GLTF2Loader, r })); return yn })().then(function (r) { o.prototype = r.prototype; var n = new o; r.call(n), Object.keys(e.shaders).forEach(function (r, t) { r.indexOf("fragment") > -1 ? e.shaders[r].uri = mn.base64 : r.indexOf("vertex") > -1 && (e.shaders[r].uri = gn.base64) }); var a = new TextEncoder("utf-8").encode(JSON.stringify(e)); n.parse(a, function (r) { (r.scene || r.scenes[0]).traverse(function (r) { r.material && (r.material = new THREE.MeshPhongMaterial({ vertexColors: THREE.VertexColors })) }), t(r) }, n.path) }); else { o.prototype = THREE.GLTFLoader.prototype; var a = new o; THREE.GLTFLoader.call(a), a.parse(r, a.path, t, n) } } catch (r) { n(r.constructor === Error ? r : new Error("THREE.GLTFLoader: Unable to parse model.")) } }, e, n) }) } AFRAME.registerComponent("gblock", { schema: { type: "asset" }, init: function () { this.model = null }, update: function () { var r = this, e = this.el, t = this.data; if (t) { var n; if (t.indexOf("?key=") > -1 && (n = t.split("?key=").pop(), t = t.substring(0, t.indexOf("?key="))), n) { var o = t.substr(t.lastIndexOf("/") + 1); if (!o) return } r.remove(), (n ? function (r, e) { var t = wn + r + "/?key=" + e, n = En.get(t); n || (n = fetch(t).then(function (e) { return e.json().catch(function (r) { return console.log('ERROR parsing gblock API server response JSON.\nRequested Model: "' + t + '"\nError: "' + JSON.stringify(r) + '"'), Promise.reject("gblock API server error. Check console for details.") }).then(function (e) { if (void 0 !== e.error) return Promise.reject("Poly API error: " + e.error.message); var t = e.formats.find(r => "GLTF" === r.formatType || "GLTF2" === r.formatType); return void 0 !== t ? t.root.url : Promise.reject("Poly asset id:" + r + " not provided in GLTF or GLTF2 format.") }) }), En.add(t, n)); return n }(o, n) : function (r) { var e = En.get(r); e || (e = fetch(On + "?url=" + r).then(function (e) { return e.json().catch(function (e) { return console.log('ERROR parsing gblock API server response JSON.\nRequested Model: "' + r + '"\nError: "' + JSON.stringify(e) + '"'), Promise.reject("gblock API server error. Check console for details.") }).then(function (t) { return e.ok ? t.gltfUrl : (console.error('ERROR loading gblock model "' + r + '" : ' + e.status + ' "' + t.message), Promise.reject(t.message)) }) }), En.add(r, e)); return e }(t)).then(Pn).then(function (t) { r.model = t.scene || t.scenes[0], r.model.animations = t.animations, e.setObject3D("mesh", r.model), e.emit("model-loaded", { format: "gltf", model: r.model }) }).catch(function (r) { console.error('ERROR loading gblock model from "' + t + '" : ' + r), e.emit("model-error", { message: r }) }) } }, remove: function () { this.model && this.el.removeObject3D("mesh") } }) }();